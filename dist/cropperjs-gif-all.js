/*! Project: https://github.com/wmlgl/cropperjs-gif, license: MIT */
!function(e,t){for(var r in t)e[r]=t[r]}(window,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=4)}([function(e,t,r){var n;e.exports=function e(t,r,i){function s(o,h){if(!r[o]){if(!t[o]){var l="function"==typeof n&&n;if(!h&&l)return n(o,!0);if(a)return a(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return s(r||e)},c,c.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var p=new Error('Uncaught, unspecified "error" event. ('+t+")");throw p.context=t,p}if(a(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(s(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,h=0;h<n;h++)l[h].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,a,o;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(o=a;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){var n,i,s,a,o;o=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),n=o.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],s="ie"===n[1]&&document.documentMode,(i={name:"version"===n[1]?n[3]:n[1],version:s||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2]),platform:{name:o.match(/ip(?:ad|od|hone)/)?"ios":(o.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,t.exports=i},{}],3:[function(e,t,r){var n,i,s,a={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},h=[].slice;n=e("events").EventEmitter,s=e("./browser.coffee"),i=function(e){var t,r;function n(e){var r,n,i;for(n in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),t)i=t[n],null==(r=this.options)[n]&&(r[n]=i)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(n,e),t={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},r={delay:500,copy:!1},n.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},n.prototype.setOptions=function(e){var t,r,n;for(t in r=[],e)a.call(e,t)&&(n=e[t],r.push(this.setOption(t,n)));return r},n.prototype.addFrame=function(e,t){var n,i;for(i in null==t&&(t={}),(n={}).transparent=this.options.transparent,r)n[i]=t[i]||r[i];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)n.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?n.data=this.getContextData(e):n.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?n.data=this.getImageData(e):n.image=e}return this.frames.push(n)},n.prototype.render=function(){var e,t,r;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,t,r;for(r=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)r.push(null);return r}.call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0,r=t;0<=r?e<r:e>r;0<=r?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},n.prototype.abort=function(){for(var e;null!=(e=this.activeWorkers.shift());)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},n.prototype.spawnWorkers=function(){var e,t,r,n;return e=Math.min(this.options.workers,this.frames.length),function(){r=[];for(var n=t=this.freeWorkers.length;t<=e?n<e:n>e;t<=e?n++:n--)r.push(n);return r}.apply(this).forEach((n=this,function(e){var t;return n.log("spawning worker "+e),(t=new Worker(n.options.workerScript)).onmessage=function(e){return n.activeWorkers.splice(n.activeWorkers.indexOf(t),1),n.freeWorkers.push(t),n.frameFinished(e.data)},n.freeWorkers.push(t)})),e},n.prototype.frameFinished=function(e){var t,r;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,r=this.freeWorkers.length;1<=r?t<r:t>r;1<=r?++t:--t)this.renderNextFrame();return o.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},n.prototype.finishRendering=function(){var e,t,r,n,i,s,a,o,h,l,p,c,u,f,d,g;for(o=0,f=this.imageParts,i=0,h=f.length;i<h;i++)t=f[i],o+=(t.data.length-1)*t.pageSize+t.cursor;for(o+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(o/1e3)+"kb"),e=new Uint8Array(o),c=0,d=this.imageParts,s=0,l=d.length;s<l;s++)for(t=d[s],g=t.data,r=a=0,p=g.length;a<p;r=++a)u=g[r],e.set(u,c),r===t.data.length-1?c+=t.cursor:c+=t.pageSize;return n=new Blob([e],{type:"image/gif"}),this.emit("finished",n,e)},n.prototype.renderNextFrame=function(){var e,t,r;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],r=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(r),r.postMessage(t)},n.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},n.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(t=this._canvas.getContext("2d")).setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},n.prototype.getTask=function(e){var t,r;if(t=this.frames.indexOf(e),r={index:t,last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===s.name},null!=e.data)r.data=e.data;else if(null!=e.context)r.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");r.data=this.getImageData(e.image)}return r},n.prototype.log=function(){var e;if(e=1<=arguments.length?h.call(arguments,0):[],this.options.debug)return console.log.apply(console,e)},n}(n),t.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)},function(e,t,r){var n;!function e(t,r,i){function s(o,h){if(!r[o]){if(!t[o]){if(!h&&("function"==typeof n&&n))return n(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[o]={exports:{}};t[o][0].call(p.exports,function(e){var r=t[o][1][e];return s(r||e)},p,p.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,r){function n(e){this.data=e,this.pos=0}n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.peekByte=function(){return this.data[this.pos]},n.prototype.readBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.readByte();return t},n.prototype.peekBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.data[this.pos+r];return t},n.prototype.readString=function(e){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readByte());return t},n.prototype.readBitArray=function(){for(var e=[],t=this.readByte(),r=7;r>=0;r--)e.push(!!(t&1<<r));return e},n.prototype.readUnsigned=function(e){var t=this.readBytes(2);return e?(t[1]<<8)+t[0]:(t[0]<<8)+t[1]},t.exports=n},{}],2:[function(e,t,r){var n=e("./bytestream");function i(e){this.stream=new n(e),this.output={}}i.prototype.parse=function(e){return this.parseParts(this.output,e),this.output},i.prototype.parseParts=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.parsePart(e,n)}},i.prototype.parsePart=function(e,t){var r,n=t.label;if(!t.requires||t.requires(this.stream,this.output,e))if(t.loop){for(var i=[];t.loop(this.stream);){var s={};this.parseParts(s,t.parts),i.push(s)}e[n]=i}else t.parts?(r={},this.parseParts(r,t.parts),e[n]=r):t.parser?(r=t.parser(this.stream,this.output,e),t.skip||(e[n]=r)):t.bits&&(e[n]=this.parseBits(t.bits))},i.prototype.parseBits=function(e){var t={},r=this.stream.readBitArray();for(var n in e){var i=e[n];i.length?t[n]=r.slice(i.index,i.index+i.length).reduce(function(e,t){return 2*e+t},0):t[n]=r[i.index]}return t},t.exports=i},{"./bytestream":1}],3:[function(e,t,r){var n={readByte:function(){return function(e){return e.readByte()}},readBytes:function(e){return function(t){return t.readBytes(e)}},readString:function(e){return function(t){return t.readString(e)}},readUnsigned:function(e){return function(t){return t.readUnsigned(e)}},readArray:function(e,t){return function(r,n,i){for(var s=t(r,n,i),a=new Array(s),o=0;o<s;o++)a[o]=r.readBytes(e);return a}}};t.exports=n},{}],4:[function(e,t,r){var n=window.GIF;n=e("./gif"),window.GIF=n},{"./gif":5}],5:[function(e,t,r){var n=e("../bower_components/js-binary-schema-parser/src/dataparser"),i=e("./schema");function s(e){var t=new Uint8Array(e),r=new n(t);this.raw=r.parse(i),this.raw.hasImages=!1;for(var s=0;s<this.raw.frames.length;s++)if(this.raw.frames[s].image){this.raw.hasImages=!0;break}}s.prototype.decompressFrame=function(e,t){if(e>=this.raw.frames.length)return null;var r=this.raw.frames[e];if(r.image){var n=r.image.descriptor.width*r.image.descriptor.height,i=function(e,t,r){var n,i,s,a,o,h,l,p,c,u,f,d,g,v,m,y,w=r,b=new Array(r),x=new Array(4096),_=new Array(4096),C=new Array(4097);for(o=1+(i=1<<(d=e)),n=i+2,l=-1,s=(1<<(a=d+1))-1,c=0;c<i;c++)x[c]=0,_[c]=c;for(f=p=count=g=v=y=m=0,u=0;u<w;){if(0===v){if(p<a){f+=t[m]<<p,p+=8,m++;continue}if(c=f&s,f>>=a,p-=a,c>n||c==o)break;if(c==i){s=(1<<(a=d+1))-1,n=i+2,l=-1;continue}if(-1==l){C[v++]=_[c],l=c,g=c;continue}for(h=c,c==n&&(C[v++]=g,c=l);c>i;)C[v++]=_[c],c=x[c];g=255&_[c],C[v++]=g,n<4096&&(x[n]=l,_[n]=g,0==(++n&s)&&n<4096&&(a++,s+=n)),l=h}v--,b[y++]=C[v],u++}for(u=y;u<w;u++)b[u]=0;return b}(r.image.data.minCodeSize,r.image.data.blocks,n);r.image.descriptor.lct.interlaced&&(i=function(e,t){for(var r=new Array(e.length),n=e.length/t,i=function(n,i){var s=e.slice(i*t,(i+1)*t);r.splice.apply(r,[n*t,t].concat(s))},s=[0,4,2,1],a=[8,8,4,2],o=0,h=0;h<4;h++)for(var l=s[h];l<n;l+=a[h])i(l,o),o++;return r}(i,r.image.descriptor.width));var s={pixels:i,dims:{top:r.image.descriptor.top,left:r.image.descriptor.left,width:r.image.descriptor.width,height:r.image.descriptor.height}};return r.image.descriptor.lct&&r.image.descriptor.lct.exists?s.colorTable=r.image.lct:s.colorTable=this.raw.gct,r.gce&&(s.delay=10*(r.gce.delay||10),s.disposalType=r.gce.extras.disposal,r.gce.extras.transparentColorGiven&&(s.transparentIndex=r.gce.transparentColorIndex)),t&&(s.patch=function(e){for(var t=e.pixels.length,r=new Uint8ClampedArray(4*t),n=0;n<t;n++){var i=4*n,s=e.pixels[n],a=e.colorTable[s];r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=s!==e.transparentIndex?255:0}return r}(s)),s}return null},s.prototype.decompressFrames=function(e){for(var t=[],r=0;r<this.raw.frames.length;r++){this.raw.frames[r].image&&t.push(this.decompressFrame(r,e))}return t},t.exports=s},{"../bower_components/js-binary-schema-parser/src/dataparser":2,"./schema":6}],6:[function(e,t,r){var n=e("../bower_components/js-binary-schema-parser/src/parsers"),i={label:"blocks",parser:function(e){for(var t=[],r=e.readByte();0!==r;r=e.readByte())t=t.concat(e.readBytes(r));return t}},s={label:"gce",requires:function(e){var t=e.peekBytes(2);return 33===t[0]&&249===t[1]},parts:[{label:"codes",parser:n.readBytes(2),skip:!0},{label:"byteSize",parser:n.readByte()},{label:"extras",bits:{future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}}},{label:"delay",parser:n.readUnsigned(!0)},{label:"transparentColorIndex",parser:n.readByte()},{label:"terminator",parser:n.readByte(),skip:!0}]},a={label:"image",requires:function(e){return 44===e.peekByte()},parts:[{label:"code",parser:n.readByte(),skip:!0},{label:"descriptor",parts:[{label:"left",parser:n.readUnsigned(!0)},{label:"top",parser:n.readUnsigned(!0)},{label:"width",parser:n.readUnsigned(!0)},{label:"height",parser:n.readUnsigned(!0)},{label:"lct",bits:{exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}}}]},{label:"lct",requires:function(e,t,r){return r.descriptor.lct.exists},parser:n.readArray(3,function(e,t,r){return Math.pow(2,r.descriptor.lct.size+1)})},{label:"data",parts:[{label:"minCodeSize",parser:n.readByte()},i]}]},o={label:"text",requires:function(e){var t=e.peekBytes(2);return 33===t[0]&&1===t[1]},parts:[{label:"codes",parser:n.readBytes(2),skip:!0},{label:"blockSize",parser:n.readByte()},{label:"preData",parser:function(e,t,r){return e.readBytes(r.text.blockSize)}},i]},h={label:"frames",parts:[s,{label:"application",requires:function(e,t,r){var n=e.peekBytes(2);return 33===n[0]&&255===n[1]},parts:[{label:"codes",parser:n.readBytes(2),skip:!0},{label:"blockSize",parser:n.readByte()},{label:"id",parser:function(e,t,r){return e.readString(r.blockSize)}},i]},{label:"comment",requires:function(e,t,r){var n=e.peekBytes(2);return 33===n[0]&&254===n[1]},parts:[{label:"codes",parser:n.readBytes(2),skip:!0},i]},a,o],loop:function(e){var t=e.peekByte();return 33===t||44===t}},l=[{label:"header",parts:[{label:"signature",parser:n.readString(3)},{label:"version",parser:n.readString(3)}]},{label:"lsd",parts:[{label:"width",parser:n.readUnsigned(!0)},{label:"height",parser:n.readUnsigned(!0)},{label:"gct",bits:{exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}}},{label:"backgroundColorIndex",parser:n.readByte()},{label:"pixelAspectRatio",parser:n.readByte()}]},{label:"gct",requires:function(e,t){return t.lsd.gct.exists},parser:n.readArray(3,function(e,t){return Math.pow(2,t.lsd.gct.size+1)})},h];t.exports=l},{"../bower_components/js-binary-schema-parser/src/parsers":3}]},{},[4]),t.GIFuctJS=GIF},function(e,t,r){"use strict";function n(e){e.background=e.background||"#fff",this.options=e,this.containerCanvas=document.createElement("canvas"),this.containerCtx=this.containerCanvas.getContext("2d"),this.convertorCanvas=document.createElement("canvas"),this.convertorCtx=this.convertorCanvas.getContext("2d"),this.containerCenterX=null,this.containerCenterY=null,this.image=null,this.height=null,this.width=null}r.r(t),r.d(t,"CropperjsGif",function(){return a});var i={IMAGE_LOAD_ERROR:"IMAGE_LOAD_ERROR",IMAGE_READ_ERROR:"IMAGE_READ_ERROR",DECODE_ERROR:"DECODE_ERROR",ENCODE_ERROR:"ENCODE_ERROR"};n.prototype.ERROR=i,n.prototype.crop=function(e,t){var r=e.getData(),n=this;this.readAndDecodeGif(function(){n.setupCanvas(r),n.cropFrame(0,r,[],function(e){n.saveGif(r,e,function(e){t&&t(e)})})})},n.prototype.readAndDecodeGif=function(e){var t=this;this.image=new Image,this.image.onload=function(){t.width=this.naturalWidth||this.width,t.height=this.naturalHeight||this.height;var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=function(){4==r.readyState&&(200==r.status?t.decode(r.response,e):t.errorHandler(i.IMAGE_READ_ERROR,new Error(r.statusText)))},r.open("GET",t.options.src),r.send(null)},this.image.onerror=function(){t.errorHandler(i.IMAGE_LOAD_ERROR)},this.image.src=this.options.src},n.prototype.decode=function(e,t){try{var r=EasyGif.decoder(e);this.frames=r.decompressFrames(),t&&t()}catch(e){this.errorHandler(i.DECODE_ERROR,e)}},n.prototype.setupCanvas=function(e){var t=Math.PI/180*e.rotate,r=this.width*Math.cos(t)+this.height*Math.sin(t),n=this.height*Math.cos(t)+this.width*Math.sin(t);this.offsetX=-Math.min(e.x,0),this.offsetY=-Math.min(e.y,0),this.containerCenterX=this.offsetX+r/2,this.containerCenterY=this.offsetY+n/2,this.containerCanvas.width=Math.max(this.offsetX+r,this.offsetX+e.width),this.containerCanvas.height=Math.max(this.offsetY+n,this.offsetY+e.height),this.containerCtx.clearRect(0,0,this.containerCanvas.width,this.containerCanvas.height),this.convertorCanvas.width=this.width,this.convertorCanvas.height=this.height},n.prototype.cropFrame=function(e,t,r,n){var i,a=this.frames[e],o=EasyGif.frameToImageData(this.containerCtx,a),h=this;this.containerCtx.save(),this.containerCtx.translate(this.containerCenterX,this.containerCenterY),this.containerCtx.rotate(t.rotate*Math.PI/180),this.containerCtx.scale(t.scaleX,t.scaleY),this.containerCtx.drawImage(this.drawImgDataToCanvas(a,o),-o.width/2,-o.height/2),this.containerCtx.restore(),0==e&&this.containerCtx.globalCompositeOperation&&(this.containerCtx.fillStyle=this.options.background,this.containerCtx.globalCompositeOperation="destination-over",this.containerCtx.fillRect(0,0,this.containerCanvas.width,this.containerCanvas.height),this.containerCtx.globalCompositeOperation="source-over"),i=this.containerCtx.getImageData(t.x+this.offsetX,t.y+this.offsetY,t.width,t.height),r.push(i),++e<this.frames.length?s(function(){h.cropFrame(e,t,r,n)}):n&&n(r)},n.prototype.drawImgDataToCanvas=function(e,t){return this.convertorCtx.clearRect(0,0,this.width,this.height),this.convertorCtx.putImageData(t,e.dims.left,e.dims.top),this.convertorCanvas},n.prototype.saveGif=function(e,t,r){var n=this.options.encoder||{};n.width=e.width,n.height=e.height;try{for(var s=EasyGif.encoder(n),a=0;a<t.length;a++)s.addFrame(t[a],{delay:this.frames[a].delay});s.on("finished",function(e){r&&r(e)}),s.render()}catch(e){this.errorHandler(i.DECODE_ERROR,e)}},n.prototype.errorHandler=function(e,t){this.options.onerror&&this.options.onerror(e,t)};var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.setTimeout,a={crop:function(e,t,r){return new n(e).crop(t,r)}}},function(e,t,r){"use strict";r.r(t);var n={createBlob:function(e,t){var r;try{r=new Blob(e,t)}catch(i){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"==i.name&&window.BlobBuilder){var n=new BlobBuilder;n.append(e[0].buffer),r=n.getBlob(t.type||"image/png")}else{if("InvalidStateError"!=i.name)throw Error("Not Supported Blob Constructor!");r=new Blob([e[0].buffer],t)}}return r}},i=r(0),s=r.n(i),a=r(1);r.d(t,"EasyGif",function(){return o});var o={fixCompatibility:function(){s.a.prototype.getContextData=function(e){var t=e.getImageData(0,0,this.options.width,this.options.height).data;return/CanvasPixelArray/.test(Object.prototype.toString.call(t))&&(t=o.toUint8Array(t)),t};var e=s.a.prototype.addFrame;s.a.prototype.addFrame=function(){var t=e.apply(this,arguments),r=this.frames[this.frames.length-1];return r&&r.data&&/CanvasPixelArray/.test(Object.prototype.toString.call(r.data))&&(r.data=o.toUint8Array(r.data)),t};var t=s.a.prototype.finishRendering.toString();t=t.replace("new Blob","createBlob"),s.a.prototype.finishRendering=new Function("createBlob","return ("+t+")")(n.createBlob)},toUint8Array:function(e){return new Uint8Array(e)},frameToImageData:function(e,t){for(var r=t.pixels.length,n=e.createImageData(t.dims.width,t.dims.height),i=n.data,s=0;s<r;s++){var a=4*s,o=t.pixels[s],h=t.colorTable[o];i[a]=h[0],i[a+1]=h[1],i[a+2]=h[2],i[a+3]=o!==t.transparentIndex?255:0}return n},decoder:function(e){return new a.GIFuctJS(e)},encoder:function(e){return new s.a(e)}};o.fixCompatibility()},function(e,t,r){"use strict";r.r(t);var n=r(3);r.d(t,"EasyGif",function(){return n.EasyGif});var i=r(2);r.d(t,"CropperjsGif",function(){return i.CropperjsGif})}]));
//# sourceMappingURL=cropperjs-gif-all.js.map